!function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}({5:function(t,e,n){t.exports=n("O+W/")},"O+W/":function(t,e){function n(){v&&(v=!1,h=$(".entity-files-drop"),p=$("#entity-file-progress"),y=$(".entity-file-upload-max"),h.bind("drop",function(t){t.preventDefault(),p.show()}).on("click",function(t){$("#entity-file-upload").trigger("click")}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#entity-file-upload").fileupload({dropZone:h,dataType:"json",add:function(t,e){h.hide(),$(".entity-file-upload-error").hide(),e.submit()},progressall:function(t,e){var n=parseInt(e.loaded/e.total*100,10);$(".progress").show(),$(".progress .progress-bar").css("width",n+"%")},done:function(t,e){$(".progress").hide(),e.result.success?(l(e.result),d(e.result.enabled),$(".entity-file-upload-error").hide(),f()):$(".entity-file-upload-error").text(e.result.error).fadeIn()},fail:function(t,e){d(!0),$(".progress").hide(),$(".entity-file-upload-error").text(s(e.jqXHR.responseJSON.errors)).fadeToggle()}}),h.bind("drop",function(t){p.show()}))}function i(){$(".entity-file-remove").each(function(){$(this).unbind("click"),$(this).on("click",function(t){$(this).removeClass("fa-trash").addClass("fa-spinner").addClass("fa-spin"),$.post({url:$(this).data("url"),data:{_method:"DELETE"},context:this}).done(function(t,e,n){$(this).parent().fadeOut(),d(t.enabled),f()})})})}function a(){$(".entity-file-rename").each(function(t){$(this).unbind("click").on("click",function(t){$(this).parent().children("a").hide(),$(this).parent().children("input").val($(this).data("default")).show().focus(),$(this).hide()})})}function r(){$(".entity-file-name").each(function(){$(this).unbind("keypress").unbind("focusout").keypress(function(t){var e,n=t.keyCode||t.which;13===n&&(t.preventDefault(),e=$(this).parent().children("a"),$.post({url:$(this).data("url"),data:{_method:"PATCH",name:$(this).val(),"csrf-token":$(".csrf-token").val()},datatype:"JSON",context:this}).done(function(t){var n=$(this).val();$(this).val(n).hide(),e.data("default",n).html(n).show(),$(this).parent().children(".entity-file-rename").data("default",n).show(),$(".entity-file-error").hide(),f()}).fail(function(t){$(this).parent().children(".entity-file-error").text(s(t.responseJSON.errors)).show()}))}).focusout(function(t){link=$(this).parent().children("a"),$(this).val($(this).data("default")),link.show(),$(this).hide(),$(this).parent().children(".entity-file-rename").show(),$(".entity-file-error").hide()})})}function o(){$(".entity-file-visibility").on("click",function(t){t.preventDefault();var e=$(this).parent().parent(),n=e.data("target"),i=e.data("target-loading");$("#"+n).removeClass("fas far fa-lock fa-user-lock fa-eye entity-file-visibility-dropdown").addClass("hidden"),$("#"+i).removeClass("hidden"),$.post({url:$(this).data("url"),data:{_method:"PATCH",visibility:$(this).data("visibility"),"csrf-token":$(".csrf-token").val()},datatype:"JSON",context:this}).done(function(t){var e=$(this).parent().parent(),n=e.data("target"),i=e.data("target-loading");$("#"+n).removeClass("hidden"),$("#"+n).addClass($(this).data("icon")+" entity-file-visibility-dropdown").prop("title",$(this).attr("title")),$("#"+i).addClass("hidden")})})}function s(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=t[n]+"\n");return e}function l(t){$(".entity-files").html(t.html),i(),a(),r(),o()}function d(t){t?(h.fadeIn(),y.hide()):(h.hide(),y.fadeIn())}function f(){$(".entity-file-list").each(function(){$.ajax({url:$(this).data("url"),context:this}).done(function(t){t&&$(this).html(t)})})}var u,c,h,p,y,v=!1;$(document).ready(function(){u=$(".entity-file-ui"),c=$("#entity-modal"),1===u.length&&u.on("click",function(t){v=!0,c.on("shown.bs.modal",function(t){n(),i(),a(),r(),o()})})})}});