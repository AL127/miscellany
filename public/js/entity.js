!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}({5:function(e,t,n){e.exports=n("O+W/")},"O+W/":function(e,t){var n,i,o,r,a,s=!1;function l(){$(".entity-file-remove").each(function(){$(this).unbind("click"),$(this).on("click",function(e){$(this).removeClass("fa-trash").addClass("fa-spinner").addClass("fa-spin"),$.post({url:$(this).data("url"),data:{_method:"DELETE"},context:this}).done(function(e,t,n){$(this).parent().fadeOut(),f(e.enabled),h()})})})}function c(){$(".entity-file-rename").each(function(e){$(this).unbind("click").on("click",function(e){console.log("rename click"),$(this).parent().children("a").hide(),$(this).parent().children("input").val($(this).data("default")).show().focus(),$(this).hide()})})}function u(){$(".entity-file-name").each(function(){$(this).unbind("keypress").unbind("focusout").keypress(function(e){var t;13===(e.keyCode||e.which)&&(e.preventDefault(),t=$(this).parent().children("a"),$.post({url:$(this).data("url"),data:{_method:"PATCH",name:$(this).val(),"csrf-token":$(".csrf-token").val()},datatype:"JSON",context:this}).done(function(e){var n=$(this).val();$(this).val(n).hide(),t.data("default",n).html(n).show(),$(this).parent().children(".entity-file-rename").data("default",n).show(),$(".entity-file-error").hide(),h()}).fail(function(e){$(this).parent().children(".entity-file-error").text(d(e.responseJSON.errors)).show()}))}).focusout(function(e){link=$(this).parent().children("a"),$(this).val($(this).data("default")),link.show(),$(this).hide(),$(this).parent().children(".entity-file-rename").show(),$(".entity-file-error").hide()})})}function d(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=e[n]+"\n");return t}function f(e){e?(o.fadeIn(),a.hide()):(o.hide(),a.fadeIn())}function h(){$(".entity-file-list").each(function(){$.ajax({url:$(this).data("url"),context:this}).done(function(e){e&&$(this).html(e)})})}$(document).ready(function(){n=$(".entity-file-ui"),i=$("#entity-modal"),1===n.length&&n.on("click",function(e){s=!0,i.on("shown.bs.modal",function(e){!function(){if(!s)return;console.log("file modal loaded"),s=!1,o=$(".entity-files-drop"),r=$("#entity-file-progress"),a=$(".entity-file-upload-max"),o.bind("drop",function(e){e.preventDefault(),r.show()}).on("click",function(e){console.log("clicked"),$("#entity-file-upload").trigger("click")}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#entity-file-upload").fileupload({dropZone:o,dataType:"json",add:function(e,t){o.hide(),$(".entity-file-upload-error").hide(),t.submit()},progressall:function(e,t){var n=parseInt(t.loaded/t.total*100,10);$(".progress").show(),$(".progress .progress-bar").css("width",n+"%")},done:function(e,t){$(".progress").hide(),console.log("done",t.result),t.result.success?(!function(e){$(".entity-files").html(e.html),l(),c(),u()}(t.result),f(t.result.enabled),$(".entity-file-upload-error").hide(),h()):($(".entity-file-upload-error").text(t.result.error).fadeIn(),console.log("no success"))},fail:function(e,t){f(!0),$(".progress").hide(),$(".entity-file-upload-error").text(d(t.jqXHR.responseJSON.errors)).fadeToggle()}}),o.bind("drop",function(e){r.show()})}(),l(),c(),u()})})})}});