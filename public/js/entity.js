!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}({5:function(t,e,n){t.exports=n("O+W/")},"O+W/":function(t,e){function n(){y&&(y=!1,c=$(".entity-files-drop"),h=$("#entity-file-progress"),p=$(".entity-file-upload-max"),c.bind("drop",function(t){t.preventDefault(),h.show()}).on("click",function(t){$("#entity-file-upload").trigger("click")}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#entity-file-upload").fileupload({dropZone:c,dataType:"json",add:function(t,e){c.hide(),$(".entity-file-upload-error").hide(),e.submit()},progressall:function(t,e){var n=parseInt(e.loaded/e.total*100,10);$(".progress").show(),$(".progress .progress-bar").css("width",n+"%")},done:function(t,e){$(".progress").hide(),e.result.success?(s(e.result),l(e.result.enabled),$(".entity-file-upload-error").hide(),u()):$(".entity-file-upload-error").text(e.result.error).fadeIn()},fail:function(t,e){l(!0),$(".progress").hide(),$(".entity-file-upload-error").text(a(e.jqXHR.responseJSON.errors)).fadeToggle()}}),c.bind("drop",function(t){h.show()}))}function i(){$(".entity-file-remove").each(function(){$(this).unbind("click"),$(this).on("click",function(t){$(this).removeClass("fa-trash").addClass("fa-spinner").addClass("fa-spin"),$.post({url:$(this).data("url"),data:{_method:"DELETE"},context:this}).done(function(t,e,n){$(this).parent().fadeOut(),l(t.enabled),u()})})})}function r(){$(".entity-file-rename").each(function(t){$(this).unbind("click").on("click",function(t){$(this).parent().children("a").hide(),$(this).parent().children("input").val($(this).data("default")).show().focus(),$(this).hide()})})}function o(){$(".entity-file-name").each(function(){$(this).unbind("keypress").unbind("focusout").keypress(function(t){var e,n=t.keyCode||t.which;13===n&&(t.preventDefault(),e=$(this).parent().children("a"),$.post({url:$(this).data("url"),data:{_method:"PATCH",name:$(this).val(),"csrf-token":$(".csrf-token").val()},datatype:"JSON",context:this}).done(function(t){var n=$(this).val();$(this).val(n).hide(),e.data("default",n).html(n).show(),$(this).parent().children(".entity-file-rename").data("default",n).show(),$(".entity-file-error").hide(),u()}).fail(function(t){$(this).parent().children(".entity-file-error").text(a(t.responseJSON.errors)).show()}))}).focusout(function(t){link=$(this).parent().children("a"),$(this).val($(this).data("default")),link.show(),$(this).hide(),$(this).parent().children(".entity-file-rename").show(),$(".entity-file-error").hide()})})}function a(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=t[n]+"\n");return e}function s(t){$(".entity-files").html(t.html),i(),r(),o()}function l(t){t?(c.fadeIn(),p.hide()):(c.hide(),p.fadeIn())}function u(){$(".entity-file-list").each(function(){$.ajax({url:$(this).data("url"),context:this}).done(function(t){t&&$(this).html(t)})})}var f,d,c,h,p,y=!1;$(document).ready(function(){f=$(".entity-file-ui"),d=$("#entity-modal"),1===f.length&&f.on("click",function(t){y=!0,d.on("shown.bs.modal",function(t){n(),i(),r(),o()})})})}});